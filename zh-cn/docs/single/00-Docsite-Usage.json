{
  "filename": "00-Docsite-Usage.md",
  "__html": "<h1 id=\"docsite-usage\">Docsite Usage <a class=\"header-anchor\" href=\"#docsite-usage\">#</a></h1>\n<h2 id=\"%E4%B8%80%E3%80%81%E5%AE%89%E8%A3%85\">一、安装 <a class=\"header-anchor\" href=\"#%E4%B8%80%E3%80%81%E5%AE%89%E8%A3%85\">#</a></h2>\n<ul>\n<li><a href=\"https://docsite.js.org\">Docsite官网</a></li>\n<li><a href=\"https://github.com/txd-team/docsite\">Docsite Github</a></li>\n<li><a href=\"https://docsify.js.org\">Docsify官网</a></li>\n<li><a href=\"https://valine.js.org\">Valine官网</a></li>\n</ul>\n<pre><code class=\"language-shell\"><span class=\"hljs-meta\">#</span><span class=\"bash\"> node版本需要 &gt; 6.x</span>\nnode -v\nnpm -v\n<span class=\"hljs-meta\">\n#</span><span class=\"bash\"> 全局安装Docsite</span>\nnpm install docsite -g\n</code></pre>\n<h2 id=\"%E4%BA%8C%E3%80%81%E8%BF%90%E8%A1%8C\">二、运行 <a class=\"header-anchor\" href=\"#%E4%BA%8C%E3%80%81%E8%BF%90%E8%A1%8C\">#</a></h2>\n<pre><code class=\"language-shell\"><span class=\"hljs-meta\">#</span><span class=\"bash\"> 初始化项目</span>\ndocsite init &lt;project_name&gt;\n<span class=\"hljs-meta\">\n#</span><span class=\"bash\"> 示例</span>\ncd /home/lorchr/ &amp;&amp; docsite init light-docs\nmkdirdir ./light-docs &amp;&amp; cd ./light-docs &amp;&amp; docsite init\n<span class=\"hljs-meta\">\n#</span><span class=\"bash\"> 预览</span>\ndocsite start\n<span class=\"hljs-meta\">\n#</span><span class=\"bash\"> 打包</span>\ndocsite build\n</code></pre>\n<h2 id=\"%E4%B8%89%E3%80%81%E9%85%8D%E7%BD%AE\">三、配置 <a class=\"header-anchor\" href=\"#%E4%B8%89%E3%80%81%E9%85%8D%E7%BD%AE\">#</a></h2>\n<h3 id=\"1.-%E4%BF%AE%E6%94%B9%E7%BD%91%E7%AB%99%E8%B7%AF%E7%94%B1%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E-site.js\">1. 修改网站路由搜索引擎 <code>site.js</code> <a class=\"header-anchor\" href=\"#1.-%E4%BF%AE%E6%94%B9%E7%BD%91%E7%AB%99%E8%B7%AF%E7%94%B1%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E-site.js\">#</a></h3>\n<pre><code class=\"language-shell\">{\n  rootPath: '/light-docs', // 发布到服务器的根目录，需以/开头但不能有尾/，如果只有/，请填写空字符串\n  port: 8080, // 本地开发服务器的启动端口\n  domain: 'dubbo.apache.org', // 站点部署域名，无需协议和path等\n  defaultSearch: 'baidu', // 默认搜索引擎，baidu或者google\n  defaultLanguage: 'zh-cn',\n}\n</code></pre>\n<h3 id=\"2.-%E4%BF%AE%E6%94%B9%E7%BD%91%E7%AB%99%E6%A0%87%E9%A2%98%E7%AD%89%E4%BF%A1%E6%81%AF-docsite.config.yml\">2. 修改网站标题等信息 <code>docsite.config.yml</code> <a class=\"header-anchor\" href=\"#2.-%E4%BF%AE%E6%94%B9%E7%BD%91%E7%AB%99%E6%A0%87%E9%A2%98%E7%AD%89%E4%BF%A1%E6%81%AF-docsite.config.yml\">#</a></h3>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">pages:</span>\n <span class=\"hljs-comment\"># key is the dirname of pages in src/pages</span>\n <span class=\"hljs-attr\">home:</span>\n  <span class=\"hljs-comment\"># 首页配置</span>\n  <span class=\"hljs-attr\">zh-cn:</span>\n   <span class=\"hljs-attr\">title:</span> <span class=\"hljs-string\">'Light Docs'</span>\n   <span class=\"hljs-attr\">keywords:</span> <span class=\"hljs-string\">'关键词1，关键词2'</span>\n   <span class=\"hljs-attr\">description:</span> <span class=\"hljs-string\">'页面内容简介'</span>\n  <span class=\"hljs-comment\"># home config</span>\n  <span class=\"hljs-attr\">en-us:</span>\n   <span class=\"hljs-attr\">title:</span> <span class=\"hljs-string\">'Light Docs'</span>\n   <span class=\"hljs-attr\">keywords:</span> <span class=\"hljs-string\">'keyword1,keyword2'</span>\n   <span class=\"hljs-attr\">description:</span> <span class=\"hljs-string\">'page description'</span>\n <span class=\"hljs-attr\">docs:</span>\n  <span class=\"hljs-comment\"># 社区页配置</span>\n  <span class=\"hljs-attr\">zh-cn:</span>\n   <span class=\"hljs-attr\">title:</span> <span class=\"hljs-string\">'Light Documentation'</span>\n   <span class=\"hljs-attr\">keywords:</span> <span class=\"hljs-string\">'关键词1，关键词2'</span>\n   <span class=\"hljs-attr\">description:</span> <span class=\"hljs-string\">'页面内容简介'</span>\n  <span class=\"hljs-comment\"># community page config</span>\n  <span class=\"hljs-attr\">en-us:</span>\n   <span class=\"hljs-attr\">title:</span> <span class=\"hljs-string\">'Light Documentation'</span>\n   <span class=\"hljs-attr\">keywords:</span> <span class=\"hljs-string\">'keyword1,keyword2'</span>\n   <span class=\"hljs-attr\">description:</span> <span class=\"hljs-string\">'page description'</span>\n <span class=\"hljs-attr\">blog:</span>\n  <span class=\"hljs-comment\"># 博客列表页配置</span>\n  <span class=\"hljs-attr\">zh-cn:</span>\n   <span class=\"hljs-attr\">title:</span> <span class=\"hljs-string\">'Light Blog'</span>\n   <span class=\"hljs-attr\">keywords:</span> <span class=\"hljs-string\">'关键词1，关键词2'</span>\n   <span class=\"hljs-attr\">description:</span> <span class=\"hljs-string\">'页面内容简介'</span>\n  <span class=\"hljs-attr\">en-us:</span>\n   <span class=\"hljs-comment\"># blog list page config</span>\n   <span class=\"hljs-attr\">title:</span> <span class=\"hljs-string\">'Light Blog'</span>\n   <span class=\"hljs-attr\">keywords:</span> <span class=\"hljs-string\">'keyword1,keyword2'</span>\n   <span class=\"hljs-attr\">description:</span> <span class=\"hljs-string\">'page description'</span>\n <span class=\"hljs-attr\">community:</span>\n  <span class=\"hljs-comment\"># 社区页配置</span>\n  <span class=\"hljs-attr\">zh-cn:</span>\n   <span class=\"hljs-attr\">title:</span> <span class=\"hljs-string\">'Light Community'</span>\n   <span class=\"hljs-attr\">keywords:</span> <span class=\"hljs-string\">'关键词1，关键词2'</span>\n   <span class=\"hljs-attr\">description:</span> <span class=\"hljs-string\">'页面内容简介'</span>\n  <span class=\"hljs-comment\"># community page config</span>\n  <span class=\"hljs-attr\">en-us:</span>\n   <span class=\"hljs-attr\">title:</span> <span class=\"hljs-string\">'Light Community'</span>\n   <span class=\"hljs-attr\">keywords:</span> <span class=\"hljs-string\">'keyword1,keyword2'</span>\n   <span class=\"hljs-attr\">description:</span> <span class=\"hljs-string\">'page description'</span>\n</code></pre>\n<h2 id=\"%E5%9B%9B%E3%80%81%E4%BD%BF%E7%94%A8-%E6%96%87%E6%A1%A3\">四、使用-文档 <a class=\"header-anchor\" href=\"#%E5%9B%9B%E3%80%81%E4%BD%BF%E7%94%A8-%E6%96%87%E6%A1%A3\">#</a></h2>\n<ol>\n<li>在<code>docs/zh-cn</code>目录下新建一个文件<code>Docsite-Usage.md</code>，并书写内容</li>\n<li>将该文件复制到<code>docs/en-us</code>目录下</li>\n<li>配置该文档到待生成的网页中<code>site_config/docs.js</code></li>\n</ol>\n<pre><code class=\"language-shell\">{\n  'en-us': {\n    sidemenu: [\n      {\n        title: 'Light Docs',\n        children: [\n          {\n            # 当前文档显示的大纲标题\n            title: 'Docsite Usage',\n            # 文档的路径\n            link: '/en-us/docs/Docsite-Usage.html',\n          }\n        ]\n      }\n    ]\n  },\n  'zh-cn': {\n    sidemenu: [\n      {\n        title: 'Light Docs',\n        children: [\n          {\n            # 当前文档显示的大纲标题\n            title: 'Docsite Usage',\n            # 文档的路径\n            link: '/zh-cn/docs/Docsite-Usage.html',\n          }\n        ]\n      }\n    ]\n  }\n}\n</code></pre>\n<ol start=\"4\">\n<li>再次运行<code>docsite start</code></li>\n</ol>\n<h2 id=\"%E4%BA%94%E3%80%81%E4%BD%BF%E7%94%A8-%E5%8D%9A%E5%AE%A2\">五、使用-博客 <a class=\"header-anchor\" href=\"#%E4%BA%94%E3%80%81%E4%BD%BF%E7%94%A8-%E5%8D%9A%E5%AE%A2\">#</a></h2>\n<h2 id=\"%E5%85%AD%E3%80%81%E4%BD%BF%E7%94%A8-%E7%A4%BE%E5%8C%BA\">六、使用-社区 <a class=\"header-anchor\" href=\"#%E5%85%AD%E3%80%81%E4%BD%BF%E7%94%A8-%E7%A4%BE%E5%8C%BA\">#</a></h2>\n<h2 id=\"%E4%B8%83%E3%80%81%E9%83%A8%E7%BD%B2\">七、部署 <a class=\"header-anchor\" href=\"#%E4%B8%83%E3%80%81%E9%83%A8%E7%BD%B2\">#</a></h2>\n<p>将生成的文档推送到新分支上</p>\n<pre><code class=\"language-shell\"><span class=\"hljs-meta\">#</span><span class=\"bash\"> 创建新分支</span>\ngit branch site\n<span class=\"hljs-meta\">\n#</span><span class=\"bash\"> 切换分支</span>\ngit checkout site\n<span class=\"hljs-meta\">\n#</span><span class=\"bash\"> 推送到远程仓库</span>\ngit push origin site\n<span class=\"hljs-meta\">\n#</span><span class=\"bash\"> 生成ssh秘钥</span>\nssh-keygen -t rsa -C \"whitetulips@163.com\"\ncat ~/.ssh/id_rsa.pub\n<span class=\"hljs-meta\">\n#</span><span class=\"bash\"> 添加Github地址</span>\ngit remote set-url --add origin https://github.com/lorchr/light-docs.git\n<span class=\"hljs-meta\">\n#</span><span class=\"bash\"> 推送到Github</span>\ngit push\n</code></pre>\n<h3 id=\"1.-%E9%83%A8%E7%BD%B2%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8\">1. 部署到服务器 <a class=\"header-anchor\" href=\"#1.-%E9%83%A8%E7%BD%B2%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8\">#</a></h3>\n<ol>\n<li>打包文件</li>\n</ol>\n<blockquote>\n<p>docsite build</p>\n</blockquote>\n<ol start=\"2\">\n<li>提取生成的文件</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>序号</th>\n<th>文件或文件夹</th>\n<th>作用</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>build</td>\n<td>js css依赖</td>\n</tr>\n<tr>\n<td>2</td>\n<td>en-us</td>\n<td>英文文档</td>\n</tr>\n<tr>\n<td>3</td>\n<td>zh-cn</td>\n<td>中文文档</td>\n</tr>\n<tr>\n<td>4</td>\n<td>img</td>\n<td>图片</td>\n</tr>\n<tr>\n<td>5</td>\n<td>index.html</td>\n<td>首页</td>\n</tr>\n<tr>\n<td>6</td>\n<td>404.html</td>\n<td>404页</td>\n</tr>\n</tbody>\n</table>\n<ol start=\"3\">\n<li>\n<p>将文档上传到服务器</p>\n</li>\n<li>\n<p>将文档上传到Nginx并配置访问路径</p>\n</li>\n</ol>\n<pre><code class=\"language-conf\">location /light-docs/ {\n  root /home/lorchr/light-docs;\n  index index.html;\n}\n\nerror_page  404  /home/lorchr/light-docs/404.html;\n</code></pre>\n<h3 id=\"2.-github-pages\">2. Github Pages <a class=\"header-anchor\" href=\"#2.-github-pages\">#</a></h3>\n<ul>\n<li><a href=\"https://docs.github.com/en/actions\">GitHub Actions 官方文档</a></li>\n<li><a href=\"https://github.com/marketplace?type=actions\">GitHub Actions 官方插件市场</a></li>\n<li><a href=\"https://github.com/sdras/awesome-actions\">Awesome-Actions 插件市场</a></li>\n<li><a href=\"https://www.ruanyifeng.com/blog/2020/08/rsync.html\">阮一峰-rsync 用法教程</a></li>\n<li><a href=\"http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html\">阮一峰-GitHub Actions 入门教程</a></li>\n<li><a href=\"http://www.ruanyifeng.com/blog/2019/12/github_actions.html\">阮一峰-GitHub Actions 定时发送天气邮件</a></li>\n</ul>\n<ol>\n<li>编写 <code>.github/workflows/main.yml</code></li>\n</ol>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Deploy</span> <span class=\"hljs-string\">GitHub</span> <span class=\"hljs-string\">Pages</span>\n<span class=\"hljs-comment\"># 触发条件：在 push 到 master 分支后</span>\n<span class=\"hljs-attr\">on:</span>\n  <span class=\"hljs-attr\">push:</span>\n    <span class=\"hljs-attr\">branches:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">master</span>\n\n<span class=\"hljs-comment\"># 任务</span>\n<span class=\"hljs-attr\">jobs:</span>\n  <span class=\"hljs-attr\">build-and-deploy:</span>\n    <span class=\"hljs-comment\"># 服务器环境：最新版 Ubuntu</span>\n    <span class=\"hljs-attr\">runs-on:</span> <span class=\"hljs-string\">ubuntu-latest</span>\n    <span class=\"hljs-attr\">steps:</span>\n      <span class=\"hljs-comment\"># 拉取代码</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Checkout</span>\n        <span class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\">actions/checkout@v3</span>\n        <span class=\"hljs-attr\">with:</span>\n          <span class=\"hljs-comment\"># 使用 JamesIves/github-pages-deploy-action@releases/v4 脚本需要的配置</span>\n          <span class=\"hljs-attr\">persist-credentials:</span> <span class=\"hljs-literal\">false</span>\n\n      <span class=\"hljs-comment\"># 设置Node环境</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Use</span> <span class=\"hljs-string\">Node.js</span> <span class=\"hljs-number\">11.</span><span class=\"hljs-string\">x</span>\n        <span class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\">actions/setup-node@v3</span>\n        <span class=\"hljs-attr\">with:</span>\n          <span class=\"hljs-attr\">node-version:</span> <span class=\"hljs-string\">'11.x'</span>\n          <span class=\"hljs-attr\">registry-url:</span> <span class=\"hljs-string\">'https://registry.npmjs.org'</span>\n\n      <span class=\"hljs-comment\"># 1、生成静态文件</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Install</span> <span class=\"hljs-string\">And</span> <span class=\"hljs-string\">Build</span>\n        <span class=\"hljs-attr\">run:</span> <span class=\"hljs-string\">|\n          npm install docsite -g\n          npm install \n          docsite build\n</span>\n      <span class=\"hljs-comment\"># 2、复制文件到Dist</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Copy</span> <span class=\"hljs-string\">to</span> <span class=\"hljs-string\">Dist</span>\n        <span class=\"hljs-attr\">run:</span> <span class=\"hljs-string\">|\n          echo \"========== Copy Files Start ==========\"\n          mkdir         ./dist/\n          mv build      ./dist/\n          mv en-us      ./dist/\n          mv zh-cn      ./dist/\n          mv img        ./dist/\n          mv 404.html   ./dist/\n          mv index.html ./dist/\n          echo \"========== Copy Files End ==========\"\n</span>\n      <span class=\"hljs-comment\"># 3、部署到 GitHub Pages</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Deploy</span>\n        <span class=\"hljs-comment\"># https://github.com/JamesIves/github-pages-deploy-action</span>\n        <span class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\">JamesIves/github-pages-deploy-action@releases/v4</span>\n        <span class=\"hljs-attr\">with:</span>\n          <span class=\"hljs-attr\">token:</span> <span class=\"hljs-string\">${{</span> <span class=\"hljs-string\">secrets.ACCESS_TOKEN</span> <span class=\"hljs-string\">}}</span>\n          <span class=\"hljs-comment\"># repository-name: lorchr/light-docs</span>\n          <span class=\"hljs-attr\">branch:</span> <span class=\"hljs-string\">site</span>\n          <span class=\"hljs-comment\"># npm run build 生成静态资源的路径，比如有的人是 `docs/.vuepress/dist`</span>\n          <span class=\"hljs-attr\">folder:</span> <span class=\"hljs-string\">dist</span>\n</code></pre>\n<ol start=\"2\">\n<li><a href=\"https://docs.github.com/cn/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token\">生成秘钥</a>\n在 <code>GitHub 主页</code> -&gt; <code>个人头像</code> -&gt; <code>Settings</code> -&gt; <code>Developer settings</code> -&gt; <code>Personal access tokens</code> 进行生成或更新</li>\n<li>配置秘钥\n<code>代码仓库</code>-&gt;<code>Settinigs</code>-&gt;<code>Secrets</code>-&gt;<code>Actions</code>-&gt;<code>New repository secret</code>填上对应的<code>key-value</code></li>\n<li>推送代码</li>\n<li>在<code>Actions</code>中查看执行的结果</li>\n</ol>\n<h3 id=\"gitee-pages\">Gitee Pages <a class=\"header-anchor\" href=\"#gitee-pages\">#</a></h3>\n",
  "link": "/zh-cn/docs/single/00-Docsite-Usage.html",
  "meta": {}
}