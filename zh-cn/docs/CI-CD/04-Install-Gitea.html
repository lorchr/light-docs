<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="keywords" content="04-Install-Gitea" />
	<meta name="description" content="04-Install-Gitea" />
	<!-- 网页标签标题 -->
	<title>04-Install-Gitea</title>
	<link rel="shortcut icon" href="/light-docs/img/docsite.ico"/>
	<link rel="stylesheet" href="/light-docs/build/documentation.css" />
</head>
<body>
	<div id="root"><div class="documentation-page" data-reactroot=""><header class="header-container header-container-normal"><div class="header-body"><a href="/light-docs/zh-cn/index.html"><img class="logo" src="/light-docs/img/dubbo_colorful.png"/></a><div class="search search-normal"><span class="icon-search"></span></div><span class="language-switch language-switch-normal">En</span><div class="header-menu"><img class="header-menu-toggle" src="/light-docs/img/system/menu_gray.png"/><ul><li class="menu-item menu-item-normal"><a href="/light-docs/zh-cn/index.html" target="_self">首页</a></li><li class="menu-item menu-item-normal menu-item-normal-active"><a href="/light-docs/zh-cn/docs/single/00-Docsite-Usage.html" target="_self">文档</a></li><li class="menu-item menu-item-normal"><a href="/light-docs/zh-cn/blog/index.html" target="_self">博客</a></li><li class="menu-item menu-item-normal"><a href="/light-docs/zh-cn/community/index.html" target="_self">社区</a></li></ul></div></div></header><div class="bar"><div class="bar-body"><img src="/light-docs/img/system/docs.png" class="front-img"/><span>文档</span><img src="/light-docs/img/system/docs.png" class="back-img"/></div></div><section class="content-section"><div class="sidemenu"><div class="sidemenu-toggle"><img src="https://img.alicdn.com/tfs/TB1E6apXHGYBuNjy0FoXXciBFXa-200-200.png"/></div><ul><li class="menu-item menu-item-level-1"><span>Light Docs</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/light-docs/zh-cn/docs/site/Overview.html" target="_self">概览</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/light-docs/zh-cn/docs/site/Quick-Start.html" target="_self">快速开始</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/light-docs/zh-cn/docs/site/Developer-Guide.html" target="_self">开发指南</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/light-docs/zh-cn/docs/single/Docsite-Usage.html" target="_self">Docsite 使用</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Spring Boot<img style="transform:rotate(-90deg)" class="menu-toggle" src="/light-docs/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/Spring-Boot/Spring-Boot.html" target="_self">Spring Boot</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Spring Cloud<img style="transform:rotate(-90deg)" class="menu-toggle" src="/light-docs/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/Spring-Cloud/Spring-Cloud.html" target="_self">Spring Cloud</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Spring Security<img style="transform:rotate(-90deg)" class="menu-toggle" src="/light-docs/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/Spring-Security/Spring-Security.html" target="_self">Spring Security</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>CI/CD<img style="transform:rotate(-90deg)" class="menu-toggle" src="/light-docs/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/CI-CD/01-Install-JDK.html" target="_self">Install JDK</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/CI-CD/02-Install-NodeJS.html" target="_self">Install NodeJS</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/CI-CD/03-Install-Maven.html" target="_self">Install Maven</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/CI-CD/04-Install-Gitea.html" target="_self">Install Gitea</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/CI-CD/05-Install-Nexus3.html" target="_self">Install Nexus3</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/CI-CD/06-Install-Jenkins.html" target="_self">Install Jenkins</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/CI-CD/07-Install-Docker Registry.html" target="_self">Install Docker Registry</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/CI-CD/08-Install-Harbor.html" target="_self">Install Harbor</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>K8s<img style="transform:rotate(-90deg)" class="menu-toggle" src="/light-docs/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/K8s/K8s-Single-Master-Cluster.html" target="_self">K8s 单Master集群</a></li></ul></li></ul></li></ul></div><div class="doc-content markdown-body"><h1 id="%E5%9B%9B%E3%80%81-%E5%AE%89%E8%A3%85-gitea">四、 安装 Gitea <a class="header-anchor" href="#%E5%9B%9B%E3%80%81-%E5%AE%89%E8%A3%85-gitea">#</a></h1>
<ul>
<li><a href="https://dl.gitea.io/gitea">https://dl.gitea.io/gitea</a></li>
<li><a href="https://www.kernel.org/pub/software/scm/git/git-2.37.2.tar.gz">https://www.kernel.org/pub/software/scm/git/git-2.37.2.tar.gz</a></li>
</ul>
<h3 id="1.-%E5%AE%89%E8%A3%85">1. 安装 <a class="header-anchor" href="#1.-%E5%AE%89%E8%A3%85">#</a></h3>
<pre><code class="language-shell"><span class="hljs-meta">#</span><span class="bash"> 安装依赖</span>
yum install -y \
  git \
  gcc-c++ \
  zlib-devel \
  perl-ExtUtils-MakeMaker \
  sqlite3
<span class="hljs-meta">
#</span><span class="bash"> 下载Git</span>
wget https://www.kernel.org/pub/software/scm/git/git-2.37.2.tar.gz -O /usr/local/git/
<span class="hljs-meta">
#</span><span class="bash"> 创建安装目录</span>
mkdir /usr/local/gitea
<span class="hljs-meta">
#</span><span class="bash"> 创建数据目录并新建数据库</span>
mkdir /usr/local/gitea/data/
<span class="hljs-meta">
#</span><span class="bash"> 创建Sqlite数据库存储数据</span>
sqlite3 /usr/local/gitea/data/gitea.db
<span class="hljs-meta">
#</span><span class="bash"> 下载Gitea</span>
wget https://dl.gitea.io/gitea/1.8.3/gitea-1.8.3-linux-amd64 -O /usr/local/gitea/gitea
<span class="hljs-meta">
#</span><span class="bash"> 修改文件的执行权限</span>
chmod +x /usr/local/gitea/gitea
</code></pre>
<h3 id="2.-%E6%B3%A8%E5%86%8C%E4%B8%BA%E6%9C%8D%E5%8A%A1">2. 注册为服务 <a class="header-anchor" href="#2.-%E6%B3%A8%E5%86%8C%E4%B8%BA%E6%9C%8D%E5%8A%A1">#</a></h3>
<p>新建一个<code>gitea.service</code>文件：</p>
<blockquote>
<p>vim /usr/lib/systemd/system/gitea.service</p>
</blockquote>
<pre><code class="language-shell">[Unit]
Description=gitea
After=network.target

[Service]
Type=forking
<span class="hljs-meta">#</span><span class="bash"> Gitea的执行文件</span>
ExecStart=/uar/local/gitea/gitea
User=root
Restart=on-abort

[Install]
WantedBy=multi-user.target
</code></pre>
<h3 id="3.-%E5%88%9D%E5%A7%8B%E5%8C%96gitea">3. 初始化Gitea <a class="header-anchor" href="#3.-%E5%88%9D%E5%A7%8B%E5%8C%96gitea">#</a></h3>
<pre><code class="language-shell"><span class="hljs-meta">#</span><span class="bash"> 重载daemon，让新的服务文件生效：</span>
systemctl daemon-reload
<span class="hljs-meta">
#</span><span class="bash"> 启动gitea服务并设置开机自启</span>
systemctl start gitea &amp;&amp; systemctl enable gitea
<span class="hljs-meta">
#</span><span class="bash"> 修改conf文件来修改gitea配置</span>
vim /usr/local/gitea/custom/conf/app.ini
<span class="hljs-meta">
#</span><span class="bash"> 备份</span>
mv /usr/local/gitea/custom/ /usr/local/gitea/custom.bak
mv /usr/local/gitea/data/ /usr/local/gitea/data.bak
mv /usr/local/gitea/gitea-repositories/ /usr/local/gitea/gitea-repositories.bak
<span class="hljs-meta">
#</span><span class="bash"> 恢复</span>
mv /usr/local/gitea/custom.bak/ /usr/local/gitea/custom
mv /usr/local/gitea/data.bak/ /usr/local/gitea/data
mv /usr/local/gitea/gitea-repositories.bak/ /usr/local/gitea/gitea-repositories
</code></pre>
<h3 id="4.-%E5%9F%9F%E5%90%8D%E8%AE%BF%E9%97%AE">4. 域名访问 <a class="header-anchor" href="#4.-%E5%9F%9F%E5%90%8D%E8%AE%BF%E9%97%AE">#</a></h3>
<p>如果想用域名访问，可以用Nginx反代。反代配置为：</p>
<pre><code class="language-conf"># 在配置文件里添加
location /gitea/ {
  proxy_pass http://localhost:3000/
  proxy_redirect off;
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
}
</code></pre>
<p>访问Web页面: <a href="http://192.168.137.101:3000">http://192.168.137.101:3000</a></p>
<ul>
<li>root/admin</li>
</ul>
<p>配置数据库等，并<strong>设置管理员账号密码</strong></p>
<blockquote>
<p>git remote set-url --add origin <a href="http://192.168.137.101:3000/root/pi-diginn.git">http://192.168.137.101:3000/root/pi-diginn.git</a></p>
</blockquote>
</div></section><footer class="footer-container"><div class="footer-body"><img src="/light-docs/img/dubbo_gray.png"/><div class="cols-container"><div class="col col-12"><h3>免责声明</h3><p>免责声明的具体内容</p></div><div class="col col-6"><dl><dt>文档</dt><dd><a href="/light-docs/zh-cn/docs/demo1.html" target="_self">概览</a></dd><dd><a href="/light-docs/zh-cn/docs/demo2.html" target="_self">快速开始</a></dd><dd><a href="/light-docs/zh-cn/docs/Docsite-Usage.html" target="_self">开发者指南</a></dd></dl></div><div class="col col-6"><dl><dt>资源</dt><dd><a href="/light-docs/zh-cn/blog/index.html" target="_self">博客</a></dd><dd><a href="/light-docs/zh-cn/community/index.html" target="_self">社区</a></dd></dl></div></div><div class="copyright"><span>Copyright © 2018 xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span></div></div></footer></div></div>
	<script src="https://f.alicdn.com/react/15.4.1/react-with-addons.min.js"></script>
	<script src="https://f.alicdn.com/react/15.4.1/react-dom.min.js"></script>
	<script>
		window.rootPath = '/light-docs';
  </script>
	<script src="/light-docs/build/documentation.js"></script>
</body>
</html>