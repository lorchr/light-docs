<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="keywords" content="DevEnv" />
	<meta name="description" content="DevEnv" />
	<!-- 网页标签标题 -->
	<title>DevEnv</title>
	<link rel="shortcut icon" href="/light-docs/img/docsite.ico"/>
	<link rel="stylesheet" href="/light-docs/build/documentation.css" />
</head>
<body>
	<div id="root"><div class="documentation-page" data-reactroot=""><header class="header-container header-container-normal"><div class="header-body"><a href="/light-docs/zh-cn/index.html"><img class="logo" src="/light-docs/img/dubbo_colorful.png"/></a><div class="search search-normal"><span class="icon-search"></span></div><span class="language-switch language-switch-normal">En</span><div class="header-menu"><img class="header-menu-toggle" src="/light-docs/img/system/menu_gray.png"/><ul><li class="menu-item menu-item-normal"><a href="/light-docs/zh-cn/index.html" target="_self">首页</a></li><li class="menu-item menu-item-normal menu-item-normal-active"><a href="/light-docs/zh-cn/docs/single/00-Docsite-Usage.html" target="_self">文档</a></li><li class="menu-item menu-item-normal"><a href="/light-docs/zh-cn/blog/index.html" target="_self">博客</a></li><li class="menu-item menu-item-normal"><a href="/light-docs/zh-cn/community/index.html" target="_self">社区</a></li></ul></div></div></header><div class="bar"><div class="bar-body"><img src="/light-docs/img/system/docs.png" class="front-img"/><span>文档</span><img src="/light-docs/img/system/docs.png" class="back-img"/></div></div><section class="content-section"><div class="sidemenu"><div class="sidemenu-toggle"><img src="https://img.alicdn.com/tfs/TB1E6apXHGYBuNjy0FoXXciBFXa-200-200.png"/></div><ul><li class="menu-item menu-item-level-1"><span>Light Docs</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/light-docs/zh-cn/docs/site/Overview.html" target="_self">概览</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/light-docs/zh-cn/docs/site/Quick-Start.html" target="_self">快速开始</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/light-docs/zh-cn/docs/site/Developer-Guide.html" target="_self">开发指南</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/light-docs/zh-cn/docs/single/00-Docsite-Usage.html" target="_self">Docsite 使用</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>开发环境<img style="transform:rotate(-90deg)" class="menu-toggle" src="/light-docs/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/devenv/DevEnv.html" target="_self">总览</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/devenv/Docker-Mysql.html" target="_self">Mysql</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/devenv/Docker-Pgsql.html" target="_self">Pgsql</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/devenv/Docker-Redis.html" target="_self">Redis</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/devenv/Docker-InfluxDB.html" target="_self">InfluxDB</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/devenv/Docker-EMQX.html" target="_self">EMQX</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Spring Boot<img style="transform:rotate(-90deg)" class="menu-toggle" src="/light-docs/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/Spring-Boot/Spring-Boot.html" target="_self">Spring Boot</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Spring Cloud<img style="transform:rotate(-90deg)" class="menu-toggle" src="/light-docs/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/Spring-Cloud/Spring-Cloud.html" target="_self">Spring Cloud</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Spring Security<img style="transform:rotate(-90deg)" class="menu-toggle" src="/light-docs/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/Spring-Security/Spring-Security.html" target="_self">Spring Security</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>CI/CD<img style="transform:rotate(-90deg)" class="menu-toggle" src="/light-docs/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/CI-CD/01-Install-JDK.html" target="_self">Install JDK</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/CI-CD/02-Install-NodeJS.html" target="_self">Install NodeJS</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/CI-CD/03-Install-Maven.html" target="_self">Install Maven</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/CI-CD/04-Install-Gitea.html" target="_self">Install Gitea</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/CI-CD/05-Install-Nexus3.html" target="_self">Install Nexus3</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/CI-CD/06-Install-Jenkins.html" target="_self">Install Jenkins</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/CI-CD/07-Install-Docker Registry.html" target="_self">Install Docker Registry</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/CI-CD/08-Install-Harbor.html" target="_self">Install Harbor</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>K8s<img style="transform:rotate(-90deg)" class="menu-toggle" src="/light-docs/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/K8s/K8s-Single-Master-Cluster.html" target="_self">K8s单Master集群</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/zh-cn/docs/K8s/Use-Rancher-build-K8s-Cluster.html" target="_self">使用Rancher搭建K8s集群</a></li></ul></li></ul></li></ul></div><div class="doc-content markdown-body"><p>开发环境搭建</p>
<h1 id="%E4%B8%80%E3%80%81%E8%BD%AF%E4%BB%B6%E5%88%97%E8%A1%A8">一、软件列表 <a class="header-anchor" href="#%E4%B8%80%E3%80%81%E8%BD%AF%E4%BB%B6%E5%88%97%E8%A1%A8">#</a></h1>
<ol>
<li>IDEA             <a href="http://zhile.io">zhile.io</a></li>
<li>DBeaver</li>
<li>MobaxTerm</li>
<li>VS Code</li>
<li>Maven            <a href="http://mvnrepository.com">mvnrepository.com</a></li>
<li>JDK</li>
<li>Git</li>
<li>U Tools</li>
<li>Docker</li>
<li>Chrome</li>
<li>企业微信\钉钉</li>
<li>FoxMail</li>
</ol>
<h1 id="%E4%BA%8C%E3%80%81%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85">二、软件安装 <a class="header-anchor" href="#%E4%BA%8C%E3%80%81%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85">#</a></h1>
<h2 id="1.-idea">1. <a href="zhile.io">IDEA</a> <a class="header-anchor" href="#1.-idea">#</a></h2>
<ol>
<li>Jrebel</li>
</ol>
<pre><code>GUID生成：https://www.guidgen.com/

激活URL :https://jrebel.qekang.com/GUID

激活成功后设置为离线模式
</code></pre>
<ol start="2">
<li>MyBatisCodeHelper-Pro</li>
</ol>
<h2 id="2.-git">2. Git <a class="header-anchor" href="#2.-git">#</a></h2>
<pre><code class="language-shell">
git config --global user.name "liuhui"
git config --global user.email "hliu@pisx.com"

ssh-keygen -t rsa -C "hliu@pisx.com"
cat /c/Users/pisx/.ssh/id_rsa.pub

git init
git add .
git commit -m "Init project"
git remote add origin https://gitee.com/lorchr/spring-boot-samples.git
git branch --set-upstream-to=origin/master master
git push -u origin master
</code></pre>
<p>常用操作</p>
<pre><code class="language-shell">-- 克隆仓库
git clone http://github.com/lorchr/spring-cloud-samples.git

-- 查看远程仓库地址
git remote -v

-- 移除远程仓库
git remote rm origin

-- 添加新的远程仓库地址
git remote add           cloud https://gitee.com/lorchr/spring-cloud-samples.git
git remote set-url --add origin http://github.com/lorchr/spring-cloud-samples.git
git push -u cloud master
<span class="hljs-meta">
#</span><span class="bash"> 提交</span>
git push 仓库别名 分支 --allow-unrelated-histories
<span class="hljs-meta">#</span><span class="bash"> 检出</span>
git pull 仓库别名 分支 --allow-unrelated-histories
</code></pre>
<h2 id="3.-docker%E6%9B%B4%E6%8D%A2%E8%BD%AF%E4%BB%B6%E6%BA%90">3. Docker更换软件源 <a class="header-anchor" href="#3.-docker%E6%9B%B4%E6%8D%A2%E8%BD%AF%E4%BB%B6%E6%BA%90">#</a></h2>
<p>修改Docker容器内部的软件源地址</p>
<ol>
<li>使用sed替换</li>
</ol>
<pre><code class="language-shell"><span class="hljs-meta">#</span><span class="bash"> 使用root用户执行命令行操作</span>
docker exec -it -u root &lt;container-id(name)&gt; /bin/bash
<span class="hljs-meta">
#</span><span class="bash"> 查看软件源</span>
cat /etc/apt/sources.list
<span class="hljs-meta">
#</span><span class="bash"> 替换软件源</span>
sed -i "s@http://deb.debian.org@http://mirrors.aliyun.com@g" /etc/apt/sources.list
sed -i "s@http://security.debian.org@http://mirrors.aliyun.com@g" /etc/apt/sources.list
</code></pre>
<p>如果使用的https源，则需要执行<code>apt install apt-transport-https</code>，再执行<code>apt update</code>更新源索引</p>
<ol start="2">
<li>直接编辑 sources.list</li>
</ol>
<pre><code class="language-shell"><span class="hljs-meta">#</span><span class="bash"> 使用root用户执行命令行操作</span>
docker exec -it -u root &lt;container-id(name)&gt; /bin/bash
<span class="hljs-meta">
#</span><span class="bash"> 查看系统版本</span>
cat /etc/os-release
<span class="hljs-meta">
#</span><span class="bash"><span class="hljs-comment"># 追加</span></span>
cat &lt;&lt; EOF &gt;&gt; /etc/apt/sources.list
<span class="hljs-meta">#</span><span class="bash"> Debian 10 buster</span>
<span class="hljs-meta">
#</span><span class="bash"> 中科大源</span>

deb http://mirrors.ustc.edu.cn/debian buster main contrib non-free
deb http://mirrors.ustc.edu.cn/debian buster-updates main contrib non-free
deb http://mirrors.ustc.edu.cn/debian buster-backports main contrib non-free
deb http://mirrors.ustc.edu.cn/debian-security/ buster/updates main contrib non-free

deb-src http://mirrors.ustc.edu.cn/debian buster main contrib non-free
deb-src http://mirrors.ustc.edu.cn/debian buster-updates main contrib non-free
deb-src http://mirrors.ustc.edu.cn/debian buster-backports main contrib non-free
deb-src http://mirrors.ustc.edu.cn/debian-security/ buster/updates main contrib non-free
<span class="hljs-meta">
#</span><span class="bash"> 官方源</span>
<span class="hljs-meta">
#</span><span class="bash"> deb http://deb.debian.org/debian buster main contrib non-free</span>
<span class="hljs-meta">#</span><span class="bash"> deb http://deb.debian.org/debian buster-updates main contrib non-free</span>
<span class="hljs-meta">#</span><span class="bash"> deb http://deb.debian.org/debian-security/ buster/updates main contrib non-free</span>
<span class="hljs-meta">
#</span><span class="bash"> deb-src http://deb.debian.org/debian buster main contrib non-free</span>
<span class="hljs-meta">#</span><span class="bash"> deb-src http://deb.debian.org/debian buster-updates main contrib non-free</span>
<span class="hljs-meta">#</span><span class="bash"> deb-src http://deb.debian.org/debian-security/ buster/updates main contrib non-free</span>
<span class="hljs-meta">
#</span><span class="bash"> 网易源</span>
<span class="hljs-meta">
#</span><span class="bash"> deb http://mirrors.163.com/debian/ buster main non-free contrib</span>
<span class="hljs-meta">#</span><span class="bash"> deb http://mirrors.163.com/debian/ buster-updates main non-free contrib</span>
<span class="hljs-meta">#</span><span class="bash"> deb http://mirrors.163.com/debian/ buster-backports main non-free contrib</span>
<span class="hljs-meta">#</span><span class="bash"> deb http://mirrors.163.com/debian-security/ buster/updates main non-free contrib</span>
<span class="hljs-meta">
#</span><span class="bash"> deb-src http://mirrors.163.com/debian/ buster main non-free contrib</span>
<span class="hljs-meta">#</span><span class="bash"> deb-src http://mirrors.163.com/debian/ buster-updates main non-free contrib</span>
<span class="hljs-meta">#</span><span class="bash"> deb-src http://mirrors.163.com/debian/ buster-backports main non-free contrib</span>
<span class="hljs-meta">#</span><span class="bash"> deb-src http://mirrors.163.com/debian-security/ buster/updates main non-free contrib</span>
<span class="hljs-meta">
#</span><span class="bash"> 阿里云</span>
<span class="hljs-meta">
#</span><span class="bash"> deb http://mirrors.aliyun.com/debian/ buster main non-free contrib</span>
<span class="hljs-meta">#</span><span class="bash"> deb http://mirrors.aliyun.com/debian/ buster-updates main non-free contrib</span>
<span class="hljs-meta">#</span><span class="bash"> deb http://mirrors.aliyun.com/debian/ buster-backports main non-free contrib</span>
<span class="hljs-meta">#</span><span class="bash"> deb http://mirrors.aliyun.com/debian-security buster/updates main</span>
<span class="hljs-meta">
#</span><span class="bash"> deb-src http://mirrors.aliyun.com/debian/ buster main non-free contrib</span>
<span class="hljs-meta">#</span><span class="bash"> deb-src http://mirrors.aliyun.com/debian/ buster-updates main non-free contrib</span>
<span class="hljs-meta">#</span><span class="bash"> deb-src http://mirrors.aliyun.com/debian/ buster-backports main non-free contrib</span>
<span class="hljs-meta">#</span><span class="bash"> deb-src http://mirrors.aliyun.com/debian-security buster/updates main</span>
EOF
<span class="hljs-meta">
#</span><span class="bash"> 更新软件源</span>
apt-get update &amp;&amp; apt-get upgrade -y
<span class="hljs-meta">
#</span><span class="bash"> 安装软件</span>
apt-get install -y vim wget
<span class="hljs-meta">
#</span><span class="bash"> 查找软件</span>
apt-file search /bin/ps | grep -w "bin/ps"
<span class="hljs-meta">
#</span><span class="bash"> Docker容器交互</span>
docker exec -it -u root &lt;container-id(name)&gt; /bin/bash
</code></pre>
<h2 id="4.-redis-stream-%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4">4. Redis Stream 基本命令 <a class="header-anchor" href="#4.-redis-stream-%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4">#</a></h2>
<ul>
<li><a href="https://blog.csdn.net/qq_43956758/article/details/109860706">https://blog.csdn.net/qq_43956758/article/details/109860706</a></li>
</ul>
<pre><code class="language-lua"># 创建stream
XADD maintenance_order:event_alarm * <span class="hljs-built_in">type</span> customIncident;

# 创建consumer group
XGROUP CREATE maintenance_order:event_alarm default_group <span class="hljs-number">0</span>;

# 获取stream元素个数
XLEN maintenance_order:event_alarm;

# 获取stream中所有元素 - 最小值 + 做大值
XRANGE maintenance_order:event_alarm - +;

# 获取stream信息
XINFO STREAM maintenance_order:event_alarm;

# 获取stream 的consumer group信息
XINFO GROUPS maintenance_order:event_alarm;

# 消费数据
XREADGROUP GROUP default_group default_consumer COUNT <span class="hljs-number">1</span> STREAMS maintenance_order:event_alarm &gt;;

# 删除消息
XDEL maintenance_order:event_alarm record_id;

# 删除stream
DEL maintenance_order:event_alarm;
</code></pre>
<p>Redis Lua脚本</p>
<pre><code class="language-lua"><span class="hljs-comment">-- 删除stream</span>
DEL maintenance_order:event_alarm;

<span class="hljs-comment">-- 设备告警</span>
keys device_alarm_matching*
del device_alarm_matching:

<span class="hljs-comment">-- 删除告警历史</span>
keys thing_alarm_matching*
<span class="hljs-keyword">local</span> keys = redis.call(<span class="hljs-string">'keys'</span>, KEYS[<span class="hljs-number">1</span>])
<span class="hljs-keyword">local</span> temp = {}
<span class="hljs-keyword">for</span> iter, value <span class="hljs-keyword">in</span> <span class="hljs-built_in">ipairs</span>(keys) <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">table</span>.<span class="hljs-built_in">insert</span>(temp, {value, redis.call(<span class="hljs-string">'del'</span>, value) })
<span class="hljs-keyword">end</span>
<span class="hljs-keyword">return</span> temp
</code></pre>
</div></section><footer class="footer-container"><div class="footer-body"><img src="/light-docs/img/dubbo_gray.png"/><div class="cols-container"><div class="col col-12"><h3>免责声明</h3><p>免责声明的具体内容</p></div><div class="col col-6"><dl><dt>文档</dt><dd><a href="/light-docs/zh-cn/docs/demo1.html" target="_self">概览</a></dd><dd><a href="/light-docs/zh-cn/docs/demo2.html" target="_self">快速开始</a></dd><dd><a href="/light-docs/zh-cn/docs/Docsite-Usage.html" target="_self">开发者指南</a></dd></dl></div><div class="col col-6"><dl><dt>资源</dt><dd><a href="/light-docs/zh-cn/blog/index.html" target="_self">博客</a></dd><dd><a href="/light-docs/zh-cn/community/index.html" target="_self">社区</a></dd></dl></div></div><div class="copyright"><span>Copyright © 2018 xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span></div></div></footer></div></div>
	<script src="https://f.alicdn.com/react/15.4.1/react-with-addons.min.js"></script>
	<script src="https://f.alicdn.com/react/15.4.1/react-dom.min.js"></script>
	<script>
		window.rootPath = '/light-docs';
  </script>
	<script src="/light-docs/build/documentation.js"></script>
</body>
</html>