<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="keywords" content="05-Install-Nexus3" />
	<meta name="description" content="05-Install-Nexus3" />
	<!-- 网页标签标题 -->
	<title>05-Install-Nexus3</title>
	<link rel="shortcut icon" href="/light-docs/img/docsite.ico"/>
	<link rel="stylesheet" href="/light-docs/build/documentation.css" />
</head>
<body>
	<div id="root"><div class="documentation-page" data-reactroot=""><header class="header-container header-container-normal"><div class="header-body"><a href="/light-docs/en-us/index.html"><img class="logo" src="/light-docs/img/dubbo_colorful.png"/></a><div class="search search-normal"><span class="icon-search"></span></div><span class="language-switch language-switch-normal">中</span><div class="header-menu"><img class="header-menu-toggle" src="/light-docs/img/system/menu_gray.png"/><ul><li class="menu-item menu-item-normal"><a href="/light-docs/en-us/index.html" target="_self">HOME</a></li><li class="menu-item menu-item-normal menu-item-normal-active"><a href="/light-docs/en-us/docs/site/Overview.html" target="_self">DOCS</a></li><li class="menu-item menu-item-normal"><a href="/light-docs/en-us/blog/index.html" target="_self">BLOG</a></li><li class="menu-item menu-item-normal"><a href="/light-docs/en-us/community/index.html" target="_self">COMMUNITY</a></li></ul></div></div></header><div class="bar"><div class="bar-body"><img src="/light-docs/img/system/docs.png" class="front-img"/><span>Documentation</span><img src="/light-docs/img/system/docs.png" class="back-img"/></div></div><section class="content-section"><div class="sidemenu"><div class="sidemenu-toggle"><img src="https://img.alicdn.com/tfs/TB1E6apXHGYBuNjy0FoXXciBFXa-200-200.png"/></div><ul><li class="menu-item menu-item-level-1"><span>Light Docs</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/light-docs/en-us/docs/site/Overview.html" target="_self">Overview</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/light-docs/en-us/docs/site/Quick-Start.html" target="_self">Quick Start</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/light-docs/en-us/docs/site/Developer-Guide.html" target="_self">Developer Guide</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/light-docs/en-us/docs/single/Docsite-Usage.html" target="_self">Docsite Usage</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Spring Boot<img style="transform:rotate(-90deg)" class="menu-toggle" src="/light-docs/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/light-docs/en-us/docs/Spring-Boot/Spring-Boot.html" target="_self">Spring Boot</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Spring Cloud<img style="transform:rotate(-90deg)" class="menu-toggle" src="/light-docs/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/light-docs/en-us/docs/Spring-Cloud/Spring-Cloud.html" target="_self">Spring Cloud</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Spring Security<img style="transform:rotate(-90deg)" class="menu-toggle" src="/light-docs/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/light-docs/en-us/docs/Spring-Security/Spring-Security.html" target="_self">Spring Security</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>CI/CD<img style="transform:rotate(-90deg)" class="menu-toggle" src="/light-docs/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/light-docs/en-us/docs/CI-CD/01-Install-JDK.html" target="_self">Install JDK</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/en-us/docs/CI-CD/02-Install-NodeJS.html" target="_self">Install NodeJS</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/en-us/docs/CI-CD/03-Install-Maven.html" target="_self">Install Maven</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/en-us/docs/CI-CD/04-Install-Gitea.html" target="_self">Install Gitea</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/en-us/docs/CI-CD/05-Install-Nexus3.html" target="_self">Install Nexus3</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/en-us/docs/CI-CD/06-Install-Jenkins.html" target="_self">Install Jenkins</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/en-us/docs/CI-CD/07-Install-Docker-Registry.html" target="_self">Install Docker Registry</a></li><li class="menu-item menu-item-level-3"><a href="/light-docs/en-us/docs/CI-CD/08-Install-Harbor.html" target="_self">Install Harbor</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>K8s<img style="transform:rotate(-90deg)" class="menu-toggle" src="/light-docs/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/light-docs/en-us/docs/K8s/K8s-Single-Master-Cluster.html" target="_self">K8s Single Master Cluster</a></li></ul></li></ul></li></ul></div><div class="doc-content markdown-body"><h1 id="%E4%BA%94%E3%80%81-%E5%AE%89%E8%A3%85-nexus3">五、 安装 Nexus3 <a class="header-anchor" href="#%E4%BA%94%E3%80%81-%E5%AE%89%E8%A3%85-nexus3">#</a></h1>
<ul>
<li><a href="https://www.sonatype.com/download-oss-sonatype">https://www.sonatype.com/download-oss-sonatype</a></li>
<li><a href="https://help.sonatype.com/repomanager3/product-information/system-requirements#SystemRequirements-Linux">https://help.sonatype.com/repomanager3/product-information/system-requirements#SystemRequirements-Linux</a></li>
<li><a href="https://help.sonatype.com/repomanager3/download/download-archives---repository-manager-3">https://help.sonatype.com/repomanager3/download/download-archives---repository-manager-3</a></li>
</ul>
<h3 id="1.-%E5%AE%89%E8%A3%85">1. 安装 <a class="header-anchor" href="#1.-%E5%AE%89%E8%A3%85">#</a></h3>
<pre><code class="language-shell"><span class="hljs-meta">#</span><span class="bash"> 下载安装包</span>
wget https://download.sonatype.com/nexus/3/nexus-3.2.0-01-unix.tar.gz -O /usr/local/nexus/nexus-3.2.0-01-unix.tar.gz
<span class="hljs-meta">
#</span><span class="bash"> 创建安装目录</span>
mkdir /usr/local/nexus/
<span class="hljs-meta">
#</span><span class="bash"> 解压安装包</span>
tar -zxvf nexus-3.2.0-01-unix.tar.gz -C /usr/local/nexus/
<span class="hljs-meta">
#</span><span class="bash"> 设置 NEXUS3 运行用户为 root</span>
vim /usr/local/nexus/nexus-3.2.0-01/bin/nexus.rc
run_as_user="root"
<span class="hljs-meta">
#</span><span class="bash"> 修改 NEXUS3 启动时要使用的 JDK 版本</span>
vim /usr/local/nexus/nexus-3.2.0-01/bin/nexus
INSTALL4J_JAVA_HOME_OVERRIDE=/usr/local/java/jdk1.8.0/
<span class="hljs-meta">
#</span><span class="bash"> 修改 NEXUS3 默认端口 (可选)</span>
vim /usr/local/nexus/nexus-3.2.0-01/etc/nexus-default.properties
application-port=18081
<span class="hljs-meta">
#</span><span class="bash"> 关闭防火墙，并开启远程访问端口 18081</span>
firewall-cmd --zone=public --add-port=18081/tcp --permanent
firewall-cmd reload
firewall-cmd --list-all
<span class="hljs-meta">
#</span><span class="bash"> 创建用户并授权（跳过）</span>
adduser nexus
passwd nexus
chown -R nexus /usr/local/java
chown -R nexus /usr/local/nexus
</code></pre>
<h3 id="2.-%E6%B3%A8%E5%86%8C%E4%B8%BA%E6%9C%8D%E5%8A%A1">2. 注册为服务 <a class="header-anchor" href="#2.-%E6%B3%A8%E5%86%8C%E4%B8%BA%E6%9C%8D%E5%8A%A1">#</a></h3>
<p>新建一个<code>nexus.service</code>文件：</p>
<blockquote>
<p>vim /usr/lib/systemd/system/nexus.service</p>
</blockquote>
<pre><code class="language-shell">[Unit]
Description=nexus
After=network.target

[Service]
Type=forking
<span class="hljs-meta">#</span><span class="bash"> Nexus的执行文件</span>
ExecStart=/usr/local/nexus/nexus-3.2.0-01/bin/nexus start
ExecStop=/usr/local/nexus/nexus-3.2.0-01/bin/nexus stop
User=root
Restart=on-abort

[Install]
WantedBy=multi-user.target
</code></pre>
<h3 id="3.-%E5%90%AF%E5%8A%A8">3. 启动 <a class="header-anchor" href="#3.-%E5%90%AF%E5%8A%A8">#</a></h3>
<pre><code class="language-shell"><span class="hljs-meta">#</span><span class="bash"> 重启守护进程</span>
systemctl daemon-reload
<span class="hljs-meta">
#</span><span class="bash"> 启动 NEXUS3</span>
systemctl enable nexus &amp;&amp; systemctl start nexus
<span class="hljs-meta">
#</span><span class="bash"> 查看状态</span>
systemctl status nexus
<span class="hljs-meta">
#</span><span class="bash"> 新版本查看密码，老版本默认（admin/admin123）</span>
cat /usr/local/nexus/sonatype-work/nexus3/admin.password
<span class="hljs-meta">
#</span><span class="bash"> 查看开机自启</span>
systemctl list-unit-files | grep nexus
<span class="hljs-meta">
#</span><span class="bash"> 关闭开机自启</span>
systemctl disable nexus
</code></pre>
<p>访问Web页面: <a href="http://192.168.137.102:18081/">http://192.168.137.102:18081/</a></p>
<ul>
<li>admin/admin123</li>
</ul>
<h3 id="4.-%E4%BB%93%E5%BA%93%E5%9C%B0%E5%9D%80">4. 仓库地址 <a class="header-anchor" href="#4.-%E4%BB%93%E5%BA%93%E5%9C%B0%E5%9D%80">#</a></h3>
<table>
<thead>
<tr>
<th>序号</th>
<th>类型</th>
<th>种类</th>
<th>URL</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Maven</td>
<td>Proxy</td>
<td><a href="https://repo1.maven.org/maven2/">https://repo1.maven.org/maven2/</a></td>
<td>中央仓库</td>
</tr>
<tr>
<td>2</td>
<td>Maven</td>
<td>Proxy</td>
<td><a href="https://maven.aliyun.com/repository/public">https://maven.aliyun.com/repository/public</a></td>
<td>阿里云仓库</td>
</tr>
<tr>
<td>3</td>
<td>Maven</td>
<td>Hosted</td>
<td></td>
<td>本地仓库</td>
</tr>
<tr>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>1</td>
<td>NPM</td>
<td>Proxy</td>
<td><a href="https://registry.npmjs.org">https://registry.npmjs.org</a></td>
<td>中央仓库</td>
</tr>
<tr>
<td>2</td>
<td>NPM</td>
<td>Proxy</td>
<td><a href="https://registry.npm.tabao.org">https://registry.npm.tabao.org</a></td>
<td>淘宝仓库</td>
</tr>
<tr>
<td>3</td>
<td>NPM</td>
<td>Proxy</td>
<td><a href="https://registry.npmmirror.com">https://registry.npmmirror.com</a></td>
<td>淘宝仓库</td>
</tr>
<tr>
<td>4</td>
<td>NPM</td>
<td>Hosted</td>
<td></td>
<td>本地仓库</td>
</tr>
<tr>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>1</td>
<td>Docker</td>
<td>Group</td>
<td>http-18083</td>
<td>组合</td>
</tr>
<tr>
<td>2</td>
<td>Docker</td>
<td>Proxy</td>
<td><a href="https://registry-1.docker.io">https://registry-1.docker.io</a></td>
<td>中央仓库</td>
</tr>
<tr>
<td>3</td>
<td>Docker</td>
<td>Proxy</td>
<td><a href="https://registry.cn-hangzhou.aliyuncs.com">https://registry.cn-hangzhou.aliyuncs.com</a></td>
<td>阿里云仓库</td>
</tr>
<tr>
<td>4</td>
<td>Docker</td>
<td>Hosted</td>
<td>http-18082</td>
<td>本地仓库</td>
</tr>
</tbody>
</table>
<p><strong>Docker仓库需要配置http地址</strong>，并重新加载
vim /etc/docker/daemon.json</p>
<pre><code class="language-json">{
  <span class="hljs-attr">"registry-mirrors"</span>: [<span class="hljs-string">"https://rv4ppfhe.mirror.aliyuncs.com"</span>],
  <span class="hljs-attr">"exec-opts"</span>: [<span class="hljs-string">"native.cgroupdriver=systemd"</span>],
  <span class="hljs-attr">"insecure-registries"</span>: [
        <span class="hljs-string">"192.168.137.102:5000"</span>,
        <span class="hljs-string">"192.168.137.102:5080"</span>,
        <span class="hljs-string">"192.168.137.102:18082"</span>
  ]
}
</code></pre>
<h3 id="5.-%E6%B5%8B%E8%AF%95">5. 测试 <a class="header-anchor" href="#5.-%E6%B5%8B%E8%AF%95">#</a></h3>
<pre><code class="language-shell"><span class="hljs-meta">#</span><span class="bash"> 重启Docker</span>
systemctl daemon-reload &amp;&amp; service docker restart
<span class="hljs-meta">
#</span><span class="bash"> 查看配置的地址是否生效</span>
docker info
<span class="hljs-meta">
#</span><span class="bash"> 登录仓库</span>
docker login 192.168.137.102:18082
<span class="hljs-meta">
#</span><span class="bash"> 拉取测试镜像</span>
docker pull alpine
<span class="hljs-meta">
#</span><span class="bash"> 重新打Tag</span>
docker tag alpine:latest 192.168.137.102:18082/pi-diginn/alpine:latest
<span class="hljs-meta">
#</span><span class="bash"> 推送到私服</span>
docker push 192.168.137.102:18082/pi-diginn/alpine:latest
<span class="hljs-meta">
#</span><span class="bash"> 从私服拉取镜像 走Group代理</span>
docker pull 192.168.137.102:18083/pi-diginn/alpine:latest
</code></pre>
<h3 id="%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BA">使用Docker搭建 <a class="header-anchor" href="#%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BA">#</a></h3>
<ul>
<li><a href="https://help.sonatype.com/repomanager3/nexus-repository-administration/formats/docker-registry/docker-repository-reverse-proxy-strategies">https://help.sonatype.com/repomanager3/nexus-repository-administration/formats/docker-registry/docker-repository-reverse-proxy-strategies</a></li>
</ul>
<pre><code class="language-shell">docker run -d \
    -p 8081:8081 \
    -p 8082:8082 \
    -p 8083:8083 \
    -v /data/nexus-data:/nexus-data \
    -v /etc/hosts:/etc/hosts \
    -v /etc/localtime:/etc/localtime \
    --restart unless-stopped \
    --name nexus \ 
    sonatype/nexus3

https://blog.51cto.com/215687833/5051848
</code></pre>
<ul>
<li><a href="https://www.cnblogs.com/hahaha111122222/p/13099635.html">安装</a></li>
<li><a href="https://hazx.hmacg.cn/server/nexus-docker-proxy.html">安装</a></li>
<li><a href="https://zhang.ge/5139.html">安装</a></li>
<li><a href="https://dylanyang.top/post/2020/06/23/nexus-3.x%E6%B8%85%E7%90%86docker%E9%95%9C%E5%83%8F/">清理镜像</a></li>
</ul>
</div></section><footer class="footer-container"><div class="footer-body"><img src="/light-docs/img/dubbo_gray.png"/><div class="cols-container"><div class="col col-12"><h3>Disclaimer</h3><p>Build By docsite powered by https://docsite.js.org</p></div><div class="col col-6"><dl><dt>Documentation</dt><dd><a href="/light-docs/en-us/docs/site/Overview.html" target="_self">Overview</a></dd><dd><a href="/light-docs/en-us/docs/site/Quick-Start.html" target="_self">Quick start</a></dd><dd><a href="/light-docs/en-us/docs/site/Developer-Guide.html" target="_self">Developer guide</a></dd></dl></div><div class="col col-6"><dl><dt>Resources</dt><dd><a href="/light-docs/en-us/blog/index.html" target="_self">Blog</a></dd><dd><a href="/light-docs/en-us/community/index.html" target="_self">Community</a></dd></dl></div></div><div class="copyright"><span>Copyright © 2018 xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span></div><div class="poweredBy"><span>Poered By: https://github.com/txd-team/docsite</span></div></div></footer></div></div>
	<script src="https://f.alicdn.com/react/15.4.1/react-with-addons.min.js"></script>
	<script src="https://f.alicdn.com/react/15.4.1/react-dom.min.js"></script>
	<script>
		window.rootPath = '/light-docs';
  </script>
	<script src="/light-docs/build/documentation.js"></script>
</body>
</html>